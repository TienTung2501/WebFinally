@model List<Web.ViewModels.CartItem>;
@{
    double total = 0;
    int count = 0;
   

    foreach (var item in Model)
    {
        total += item.total;
        count += item.quantity;

    }
}
<li class="hm-minicart">
    <div class="hm-minicart-trigger" id="active-minicart">
        <span class="item-icon"></span>
        <span class="item-text">
            $@total
            <span class="cart-item-count">@count</span>
        </span>
    </div>
    <span></span>
    <div class="minicart" id="display-minicart">
        <ul class="minicart-product-list">
            @for (int i = 0; i < (4 > Model.Count ? Model.Count : 3); i++)
            {
                <li>
                    <a href="single-product.html" class="minicart-product-image">
                        <img src="images/product/small-size/@Model[i].product.Image" alt="cart products">
                    </a>
                    <div class="minicart-product-details">
                        <h6><a href="single-product.html">@Model[i].product.NameProduct</a></h6>
                        <span>$@Model[i].product.Price * @Model[i].quantity</span>
                    </div>
                </li>
            }

        </ul>
        <p class="minicart-total">SUBTOTAL: <span>$@total</span></p>
        <div class="minicart-button">
            <a asp-action="Index" asp-controller="ShoppingCart" class="li-button li-button-dark li-button-fullwidth li-button-sm">
                <span>View Full Cart</span>
            </a>
            <a asp-controller="Order" asp-action="Index" class="li-button li-button-dark li-button-fullwidth li-button-sm">View Order</a>
        </div>
    </div>
</li>


@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@model IEnumerable<TblProduct>

<div class="card row shadow bg border-0 my-4">
    <div class="card-header bg-secondary  ml-0 py-3">
        <div class="row">
            <div class="col-12 text-center">
                <h2 class="text-white py-2">Product List</h2>
            </div>
        </div>
    </div>
    <div class="pt-4 pb-4 d-flex">
        <div class="" style="width:15%">@await Component.InvokeAsync("Category")</div>
        <div class="row pb-3  justify-content-between align-items-center" style="width:85%">           
            <div class=" pr-15 pb-15 ">
                
                <a asp-controller="Product" asp-action="Create" m class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Create New Product
                </a>
            </div>
            @if (Model.Any())
            {
                <div id="content" class="w-100">
                    <table class="table align-content-center text-black border border-secondary">
                        <tr>
                            <th>NameProduct</th>
                            <th>CategoryID</th>
                            <th>Price</th>
                            <th>Discount</th>
                            <th>Quantity</th>
                            <th>StartsAt</th>
                            <th></th>
                        </tr>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.NameProduct</td>
                                <td>@item.CategoryId</td>
                                <td>@item.Price</td>
                                <td>@item.Discount</td>
                                <td>@item.Quantity</td>
                                <td>@item.StartsAt</td>
                                <td>
                                    <div class="text-center">
                                        <form >
                                            <a asp-controller="Product" asp-action="Details" asp-route-id="@item.ProductId" class="btn btn-dark text-white " style="cursor:pointer">
                                                Details
                                            </a>
                                            <a asp-controller="Product" asp-action="Edit" asp-route-id="@item.ProductId" class="btn btn-info text-white" style="cursor:pointer">
                                                Edit
                                            </a>
                                            <a asp-controller="Product" asp-action="Delete" asp-route-id="@item.ProductId" class="btn btn-info text-white" style="cursor:pointer">
                                                Delete
                                            </a>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        }
                    </table>
                </div>

            }
        </div>      
    </div>
</div>
@section Scripts {
    <script>
        // $("li").click(function (e) {
        //     var id = $(this).attr("id");
        //     $.ajax({
        //         url: "ProductByCategory",
        //         data: { mid: id },
        //         success: function (response) {
        //             $("div#content").html(response);
        //         }
        //     });
        // });
        $("li").on("submit", function (e) {
            var id = $(this).attr("id");
            //Xóa lựa chọn của các checkbox
            $("input[type=checkbox][name=product-categori]").prop("checked", false);
            //Xóa lựa chọn của các radio
            $("input[type=radio][name=product-size]").prop("checked", false);
            $.ajax({
                url: "ProductByCategory",
                data: { mid: id },
                success: function (response) {
                    $("div#content").html(response);
                }
            });
        });
    </script>
}